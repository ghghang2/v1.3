
Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8002
  Network URL: http://172.28.0.12:8002
  External URL: http://34.126.149.217:8002

[31mâ”€â”€[0m[31mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m[31m [0m[1;31mTraceback [0m[1;2;31m(most recent call last)[0m[31m [0m[31mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m[31mâ”€â”€[0m
[31m [0m [2;33m/usr/local/lib/python3.12/dist-packages/streamlit/runtime/scriptrunner/[0m[1;33mexec_code.py[0m: [31m [0m
[31m [0m [94m129[0m in [92mexec_func_with_error_handling[0m                                                 [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/usr/local/lib/python3.12/dist-packages/streamlit/runtime/scriptrunner/[0m[1;33mscript_runner[0m [31m [0m
[31m [0m [1;33m.py[0m:[94m672[0m in [92mcode_to_exec[0m                                                              [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/content/[0m[1;33mapp.py[0m:[94m156[0m in [92m<module>[0m                                                      [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m153 [0m[2mâ”‚   â”‚   [0mplaceholder.markdown(full_text, unsafe_allow_html=[94mTrue[0m)                [31m [0m
[31m [0m   [2m154 [0m[2mâ”‚   â”‚   [0m                                                                       [31m [0m
[31m [0m   [2m155 [0m[2mâ”‚   â”‚   [0m[2m# Persist the conversation history (assistant includes tool output)[0m    [31m [0m
[31m [0m [31mâ± [0m156 [2mâ”‚   [0m[1;2;4mâ”‚   [0m[1;4mhi[0mstory.append((user_input, full_text))                                [31m [0m
[31m [0m   [2m157 [0m[2mâ”‚   â”‚   [0mlog_message(session_id, [33m"[0m[33massistant[0m[33m"[0m, full_text)                        [31m [0m
[31m [0m   [2m158 [0m[2mâ”‚   â”‚   [0mst.session_state.history = history                                     [31m [0m
[31m [0m   [2m159 [0m                                                                               [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/content/[0m[1;33mapp.py[0m:[94m140[0m in [92mmain[0m                                                          [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m137 [0m[2mâ”‚   â”‚   â”‚   [0massistant_text, tool_calls = stream_and_collect(client, msgs, tool [31m [0m
[31m [0m   [2m138 [0m[2mâ”‚   â”‚   â”‚   [0m[2m# The streamed text is already shown; we will overwrite later if t[0m [31m [0m
[31m [0m   [2m139 [0m[2mâ”‚   â”‚   [0m                                                                       [31m [0m
[31m [0m [31mâ± [0m140 [2mâ”‚   â”‚   [0mlog_message(session_id, [33m"[0m[33massistan[0m[1;4;33mt[0m[1;4;33m"[0m[1;4m, assistant_text)[0m                   [31m [0m
[31m [0m   [2m141 [0m[2mâ”‚   â”‚   [0m                                                                       [31m [0m
[31m [0m   [2m142 [0m[2mâ”‚   â”‚   [0mfull_text = assistant_text                                             [31m [0m
[31m [0m   [2m143 [0m[2mâ”‚   â”‚   [0m[94mif[0m tool_calls:                                                         [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/content/app/[0m[1;33mchat.py[0m:[94m210[0m in [92mprocess_tool_calls[0m                                       [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m207 [0m[2mâ”‚   â”‚   â”‚   [0mfull_text += result                                                [31m [0m
[31m [0m   [2m208 [0m[2mâ”‚   â”‚   [0m                                                                       [31m [0m
[31m [0m   [2m209 [0m[2mâ”‚   â”‚   [0mnew_placeholder = st.empty()                                           [31m [0m
[31m [0m [31mâ± [0m210 [2mâ”‚   â”‚   [0mnew_text, new_tool_calls = [1;4mstream_and_collect([0m                         [31m [0m
[31m [0m   [2m211 [0m[1;2;4mâ”‚   â”‚   â”‚   [0m[1;4mclient, messages, tools, new_placeholder[0m                           [31m [0m
[31m [0m   [2m212 [0m[1;2;4mâ”‚   â”‚   [0m[1;4m)[0m                                                                      [31m [0m
[31m [0m   [2m213 [0m[2mâ”‚   â”‚   [0mfull_text += new_text                                                  [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/content/app/[0m[1;33mchat.py[0m:[94m78[0m in [92mstream_and_collect[0m                                        [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m 75 [0m[2;33mâ”‚   [0m[33massistant text and a list of tool calls (or ``None`` if no tool call[0m       [31m [0m
[31m [0m   [2m 76 [0m[2;33mâ”‚   [0m[33mwas emitted).[0m                                                              [31m [0m
[31m [0m   [2m 77 [0m[2;33mâ”‚   [0m[33m"""[0m                                                                        [31m [0m
[31m [0m [31mâ± [0m 78 [2mâ”‚   [0mstream = client.chat.completions.create(                                   [31m [0m
[31m [0m   [2m 79 [0m[2mâ”‚   â”‚   [0mmodel=MODEL_NAME,                                                      [31m [0m
[31m [0m   [2m 80 [0m[2mâ”‚   â”‚   [0mmessages=messages,                                                     [31m [0m
[31m [0m   [2m 81 [0m[2mâ”‚   â”‚   [0mstream=[94mTrue[0m,                                                           [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/usr/local/lib/python3.12/dist-packages/openai/_utils/[0m[1;33m_utils.py[0m:[94m286[0m in [92mwrapper[0m       [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m283 [0m[2mâ”‚   â”‚   â”‚   â”‚   â”‚   [0m[94melse[0m:                                                      [31m [0m
[31m [0m   [2m284 [0m[2mâ”‚   â”‚   â”‚   â”‚   â”‚   â”‚   [0mmsg = [33mf[0m[33m"[0m[33mMissing required argument: [0m[33m{[0mquote(missing[[94m0[0m])[33m}[0m [31m [0m
[31m [0m   [2m285 [0m[2mâ”‚   â”‚   â”‚   â”‚   [0m[94mraise[0m [96mTypeError[0m(msg)                                           [31m [0m
[31m [0m [31mâ± [0m286 [2mâ”‚   â”‚   â”‚   [0m[94mreturn[0m [1;4mfunc(*args, **kwargs)[0m                                       [31m [0m
[31m [0m   [2m287 [0m[2mâ”‚   â”‚   [0m                                                                       [31m [0m
[31m [0m   [2m288 [0m[2mâ”‚   â”‚   [0m[94mreturn[0m wrapper  [2m# type: ignore[0m                                         [31m [0m
[31m [0m   [2m289 [0m                                                                               [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/usr/local/lib/python3.12/dist-packages/openai/resources/chat/completions/[0m[1;33mcompletion[0m [31m [0m
[31m [0m [1;33ms.py[0m:[94m1192[0m in [92mcreate[0m                                                                  [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m1189 [0m[2mâ”‚   â”‚   [0mtimeout: [96mfloat[0m | httpx.Timeout | [94mNone[0m | NotGiven = not_given,         [31m [0m
[31m [0m   [2m1190 [0m[2mâ”‚   [0m) -> ChatCompletion | Stream[ChatCompletionChunk]:                        [31m [0m
[31m [0m   [2m1191 [0m[2mâ”‚   â”‚   [0mvalidate_response_format(response_format)                             [31m [0m
[31m [0m [31mâ± [0m1192 [2mâ”‚   â”‚   [0m[94mreturn[0m [96mself[0m._post(                                                    [31m [0m
[31m [0m   [2m1193 [0m[2mâ”‚   â”‚   â”‚   [0m[33m"[0m[33m/chat/completions[0m[33m"[0m,                                              [31m [0m
[31m [0m   [2m1194 [0m[2mâ”‚   â”‚   â”‚   [0mbody=maybe_transform(                                             [31m [0m
[31m [0m   [2m1195 [0m[2mâ”‚   â”‚   â”‚   â”‚   [0m{                                                             [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/usr/local/lib/python3.12/dist-packages/openai/[0m[1;33m_base_client.py[0m:[94m1294[0m in [92mpost[0m          [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m1291 [0m[2mâ”‚   â”‚   [0mopts = FinalRequestOptions.construct(                                 [31m [0m
[31m [0m   [2m1292 [0m[2mâ”‚   â”‚   â”‚   [0mmethod=[33m"[0m[33mpost[0m[33m"[0m, url=path, json_data=body, content=content, files=t [31m [0m
[31m [0m   [2m1293 [0m[2mâ”‚   â”‚   [0m)                                                                     [31m [0m
[31m [0m [31mâ± [0m1294 [2mâ”‚   â”‚   [0m[94mreturn[0m cast(ResponseT, [1;4;96mself[0m[1;4m.request(cast_to, opts, stream=stream, str[0m [31m [0m
[31m [0m   [2m1295 [0m[2mâ”‚   [0m                                                                          [31m [0m
[31m [0m   [2m1296 [0m[2mâ”‚   [0m[94mdef[0m[90m [0m[92mpatch[0m(                                                                [31m [0m
[31m [0m   [2m1297 [0m[2mâ”‚   â”‚   [0m[96mself[0m,                                                                 [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/usr/local/lib/python3.12/dist-packages/openai/[0m[1;33m_base_client.py[0m:[94m1067[0m in [92mrequest[0m       [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m1064 [0m[2mâ”‚   â”‚   â”‚   â”‚   â”‚   [0merr.response.read()                                       [31m [0m
[31m [0m   [2m1065 [0m[2mâ”‚   â”‚   â”‚   â”‚   [0m                                                              [31m [0m
[31m [0m   [2m1066 [0m[2mâ”‚   â”‚   â”‚   â”‚   [0mlog.debug([33m"[0m[33mRe-raising status error[0m[33m"[0m)                          [31m [0m
[31m [0m [31mâ± [0m1067 [2mâ”‚   â”‚   â”‚   â”‚   [0m[1;4;94mraise[0m[1;4m [0m[1;4;96mself[0m[1;4m._make_status_error_from_response(err.response) [0m[1;4;94mfro[0m [31m [0m
[31m [0m   [2m1068 [0m[2mâ”‚   â”‚   â”‚   [0m                                                                  [31m [0m
[31m [0m   [2m1069 [0m[2mâ”‚   â”‚   â”‚   [0m[94mbreak[0m                                                             [31m [0m
[31m [0m   [2m1070 [0m                                                                              [31m [0m
[31mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m
[1;91mInternalServerError: [0mError code: [1;36m500[0m - [1m{[0m[32m'error'[0m: [1m{[0m[32m'code'[0m: [1;36m500[0m, [32m'message'[0m: 
[32m'\n------------\nWhile executing CallExpression at line 328, column 32 in source:\n... [0m
[32mnone %[0m[32m}[0m[32mâ†µ            [0m[32m{[0m[32m{[0m[32m- raise_exception[0m[32m([0m[32m"Message has tool role, but there was n...\n    [0m
[32m^\nError: Jinja Exception: Message has tool role, but there was no previous assistant [0m
[32mmessage with a tool call!'[0m, [32m'type'[0m: [32m'server_error'[0m[1m}[0m[1m}[0m
[31mâ”€â”€[0m[31mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m[31m [0m[1;31mTraceback [0m[1;2;31m(most recent call last)[0m[31m [0m[31mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m[31mâ”€â”€[0m
[31m [0m [2;33m/usr/local/lib/python3.12/dist-packages/streamlit/runtime/scriptrunner/[0m[1;33mexec_code.py[0m: [31m [0m
[31m [0m [94m129[0m in [92mexec_func_with_error_handling[0m                                                 [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/usr/local/lib/python3.12/dist-packages/streamlit/runtime/scriptrunner/[0m[1;33mscript_runner[0m [31m [0m
[31m [0m [1;33m.py[0m:[94m672[0m in [92mcode_to_exec[0m                                                              [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/content/[0m[1;33mapp.py[0m:[94m156[0m in [92m<module>[0m                                                      [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m153 [0m[2mâ”‚   [0m)                                                                          [31m [0m
[31m [0m   [2m154 [0m                                                                               [31m [0m
[31m [0m   [2m155 [0m[94mif[0m [91m__name__[0m == [33m"[0m[33m__main__[0m[33m"[0m:                                                     [31m [0m
[31m [0m [31mâ± [0m156 [2mâ”‚   [0m[1;4mmain()[0m                                                                     [31m [0m
[31m [0m   [2m157 [0m                                                                               [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/content/[0m[1;33mapp.py[0m:[94m140[0m in [92mmain[0m                                                          [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m137 [0m[2mâ”‚   â”‚   [0m                                                                       [31m [0m
[31m [0m   [2m138 [0m[2mâ”‚   â”‚   [0mfull_text = assistant_text                                             [31m [0m
[31m [0m   [2m139 [0m[2mâ”‚   â”‚   [0m[94mif[0m tool_calls:                                                         [31m [0m
[31m [0m [31mâ± [0m140 [2mâ”‚   â”‚   â”‚   [0mtool_text, remaining_calls = [1;4mprocess_tool_calls(client, msgs, tool[0m [31m [0m
[31m [0m   [2m141 [0m[2mâ”‚   â”‚   â”‚   [0mfull_text += tool_text                                             [31m [0m
[31m [0m   [2m142 [0m[2mâ”‚   â”‚   â”‚   [0m[94mwhile[0m remaining_calls:                                             [31m [0m
[31m [0m   [2m143 [0m[2mâ”‚   â”‚   â”‚   â”‚   [0mtool_text, remaining_calls = process_tool_calls(client, msgs,  [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/content/app/[0m[1;33mchat.py[0m:[94m210[0m in [92mprocess_tool_calls[0m                                       [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m207 [0m[2mâ”‚   â”‚   â”‚   [0mfull_text += result                                                [31m [0m
[31m [0m   [2m208 [0m[2mâ”‚   â”‚   [0m                                                                       [31m [0m
[31m [0m   [2m209 [0m[2mâ”‚   â”‚   [0mnew_placeholder = st.empty()                                           [31m [0m
[31m [0m [31mâ± [0m210 [2mâ”‚   â”‚   [0mnew_text, new_tool_calls = [1;4mstream_and_collect([0m                         [31m [0m
[31m [0m   [2m211 [0m[1;2;4mâ”‚   â”‚   â”‚   [0m[1;4mclient, messages, tools, new_placeholder[0m                           [31m [0m
[31m [0m   [2m212 [0m[1;2;4mâ”‚   â”‚   [0m[1;4m)[0m                                                                      [31m [0m
[31m [0m   [2m213 [0m[2mâ”‚   â”‚   [0mfull_text += new_text                                                  [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/content/app/[0m[1;33mchat.py[0m:[94m78[0m in [92mstream_and_collect[0m                                        [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m 75 [0m[2;33mâ”‚   [0m[33massistant text and a list of tool calls (or ``None`` if no tool call[0m       [31m [0m
[31m [0m   [2m 76 [0m[2;33mâ”‚   [0m[33mwas emitted).[0m                                                              [31m [0m
[31m [0m   [2m 77 [0m[2;33mâ”‚   [0m[33m"""[0m                                                                        [31m [0m
[31m [0m [31mâ± [0m 78 [2mâ”‚   [0mstream = client.chat.completions.create(                                   [31m [0m
[31m [0m   [2m 79 [0m[2mâ”‚   â”‚   [0mmodel=MODEL_NAME,                                                      [31m [0m
[31m [0m   [2m 80 [0m[2mâ”‚   â”‚   [0mmessages=messages,                                                     [31m [0m
[31m [0m   [2m 81 [0m[2mâ”‚   â”‚   [0mstream=[94mTrue[0m,                                                           [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/usr/local/lib/python3.12/dist-packages/openai/_utils/[0m[1;33m_utils.py[0m:[94m286[0m in [92mwrapper[0m       [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m283 [0m[2mâ”‚   â”‚   â”‚   â”‚   â”‚   [0m[94melse[0m:                                                      [31m [0m
[31m [0m   [2m284 [0m[2mâ”‚   â”‚   â”‚   â”‚   â”‚   â”‚   [0mmsg = [33mf[0m[33m"[0m[33mMissing required argument: [0m[33m{[0mquote(missing[[94m0[0m])[33m}[0m [31m [0m
[31m [0m   [2m285 [0m[2mâ”‚   â”‚   â”‚   â”‚   [0m[94mraise[0m [96mTypeError[0m(msg)                                           [31m [0m
[31m [0m [31mâ± [0m286 [2mâ”‚   â”‚   â”‚   [0m[94mreturn[0m [1;4mfunc(*args, **kwargs)[0m                                       [31m [0m
[31m [0m   [2m287 [0m[2mâ”‚   â”‚   [0m                                                                       [31m [0m
[31m [0m   [2m288 [0m[2mâ”‚   â”‚   [0m[94mreturn[0m wrapper  [2m# type: ignore[0m                                         [31m [0m
[31m [0m   [2m289 [0m                                                                               [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/usr/local/lib/python3.12/dist-packages/openai/resources/chat/completions/[0m[1;33mcompletion[0m [31m [0m
[31m [0m [1;33ms.py[0m:[94m1192[0m in [92mcreate[0m                                                                  [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m1189 [0m[2mâ”‚   â”‚   [0mtimeout: [96mfloat[0m | httpx.Timeout | [94mNone[0m | NotGiven = not_given,         [31m [0m
[31m [0m   [2m1190 [0m[2mâ”‚   [0m) -> ChatCompletion | Stream[ChatCompletionChunk]:                        [31m [0m
[31m [0m   [2m1191 [0m[2mâ”‚   â”‚   [0mvalidate_response_format(response_format)                             [31m [0m
[31m [0m [31mâ± [0m1192 [2mâ”‚   â”‚   [0m[94mreturn[0m [96mself[0m._post(                                                    [31m [0m
[31m [0m   [2m1193 [0m[2mâ”‚   â”‚   â”‚   [0m[33m"[0m[33m/chat/completions[0m[33m"[0m,                                              [31m [0m
[31m [0m   [2m1194 [0m[2mâ”‚   â”‚   â”‚   [0mbody=maybe_transform(                                             [31m [0m
[31m [0m   [2m1195 [0m[2mâ”‚   â”‚   â”‚   â”‚   [0m{                                                             [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/usr/local/lib/python3.12/dist-packages/openai/[0m[1;33m_base_client.py[0m:[94m1294[0m in [92mpost[0m          [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m1291 [0m[2mâ”‚   â”‚   [0mopts = FinalRequestOptions.construct(                                 [31m [0m
[31m [0m   [2m1292 [0m[2mâ”‚   â”‚   â”‚   [0mmethod=[33m"[0m[33mpost[0m[33m"[0m, url=path, json_data=body, content=content, files=t [31m [0m
[31m [0m   [2m1293 [0m[2mâ”‚   â”‚   [0m)                                                                     [31m [0m
[31m [0m [31mâ± [0m1294 [2mâ”‚   â”‚   [0m[94mreturn[0m cast(ResponseT, [1;4;96mself[0m[1;4m.request(cast_to, opts, stream=stream, str[0m [31m [0m
[31m [0m   [2m1295 [0m[2mâ”‚   [0m                                                                          [31m [0m
[31m [0m   [2m1296 [0m[2mâ”‚   [0m[94mdef[0m[90m [0m[92mpatch[0m(                                                                [31m [0m
[31m [0m   [2m1297 [0m[2mâ”‚   â”‚   [0m[96mself[0m,                                                                 [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/usr/local/lib/python3.12/dist-packages/openai/[0m[1;33m_base_client.py[0m:[94m1067[0m in [92mrequest[0m       [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m1064 [0m[2mâ”‚   â”‚   â”‚   â”‚   â”‚   [0merr.response.read()                                       [31m [0m
[31m [0m   [2m1065 [0m[2mâ”‚   â”‚   â”‚   â”‚   [0m                                                              [31m [0m
[31m [0m   [2m1066 [0m[2mâ”‚   â”‚   â”‚   â”‚   [0mlog.debug([33m"[0m[33mRe-raising status error[0m[33m"[0m)                          [31m [0m
[31m [0m [31mâ± [0m1067 [2mâ”‚   â”‚   â”‚   â”‚   [0m[1;4;94mraise[0m[1;4m [0m[1;4;96mself[0m[1;4m._make_status_error_from_response(err.response) [0m[1;4;94mfro[0m [31m [0m
[31m [0m   [2m1068 [0m[2mâ”‚   â”‚   â”‚   [0m                                                                  [31m [0m
[31m [0m   [2m1069 [0m[2mâ”‚   â”‚   â”‚   [0m[94mbreak[0m                                                             [31m [0m
[31m [0m   [2m1070 [0m                                                                              [31m [0m
[31mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m
[1;91mInternalServerError: [0mError code: [1;36m500[0m - [1m{[0m[32m'error'[0m: [1m{[0m[32m'code'[0m: [1;36m500[0m, [32m'message'[0m: 
[32m'\n------------\nWhile executing CallExpression at line 328, column 32 in source:\n... [0m
[32mnone %[0m[32m}[0m[32mâ†µ            [0m[32m{[0m[32m{[0m[32m- raise_exception[0m[32m([0m[32m"Message has tool role, but there was n...\n    [0m
[32m^\nError: Jinja Exception: Message has tool role, but there was no previous assistant [0m
[32mmessage with a tool call!'[0m, [32m'type'[0m: [32m'server_error'[0m[1m}[0m[1m}[0m
[31mâ”€â”€[0m[31mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m[31m [0m[1;31mTraceback [0m[1;2;31m(most recent call last)[0m[31m [0m[31mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m[31mâ”€â”€[0m
[31m [0m [2;33m/usr/local/lib/python3.12/dist-packages/streamlit/runtime/scriptrunner/[0m[1;33mexec_code.py[0m: [31m [0m
[31m [0m [94m129[0m in [92mexec_func_with_error_handling[0m                                                 [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/usr/local/lib/python3.12/dist-packages/streamlit/runtime/scriptrunner/[0m[1;33mscript_runner[0m [31m [0m
[31m [0m [1;33m.py[0m:[94m672[0m in [92mcode_to_exec[0m                                                              [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/content/[0m[1;33mapp.py[0m:[94m169[0m in [92m<module>[0m                                                      [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/content/[0m[1;33mapp.py[0m:[94m153[0m in [92mmain[0m                                                          [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m150 [0m[2mâ”‚   [0mcomponents.html(                                                           [31m [0m
[31m [0m   [2m151 [0m[2mâ”‚   â”‚   [0m[33m"[0m[33m<script>window.addEventListener([0m[33m'[0m[33mbeforeunload[0m[33m'[0m[33m, e=>[0m[33m{[0m[33m'[0m[33msave[0m[33m'[0m[33m:true});</s[0m [31m [0m
[31m [0m   [2m152 [0m[2mâ”‚   â”‚   [0mheight=[94m0[0m,                                                              [31m [0m
[31m [0m [31mâ± [0m153 [2mâ”‚   [0m)                                                                          [31m [0m
[31m [0m   [2m154 [0m                                                                               [31m [0m
[31m [0m   [2m155 [0m[94mif[0m [91m__name__[0m == [33m"[0m[33m__main__[0m[33m"[0m:                                                     [31m [0m
[31m [0m   [2m156 [0m[2mâ”‚   [0mmain()                                                                     [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/content/app/[0m[1;33mchat.py[0m:[94m227[0m in [92mprocess_tool_calls[0m                                       [31m [0m
[31m [0m                                                                                      [31m [0m
[31mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m
[1;91mNameError: [0mname [32m'new_placeholder'[0m is not defined
2026-02-02 09:23:54.535 Script compilation error
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/dist-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in _run_script
    code = self._script_cache.get_bytecode(script_path)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/dist-packages/streamlit/runtime/scriptrunner/script_cache.py", line 72, in get_bytecode
    filebody = magic.add_magic(filebody, script_path)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/dist-packages/streamlit/runtime/scriptrunner/magic.py", line 45, in add_magic
    tree = ast.parse(code, script_path, "exec")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/ast.py", line 52, in parse
    return compile(source, filename, mode, flags,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/content/app.py", line 80
    )
    ^
SyntaxError: unmatched ')'
2026-02-02 09:23:54.540 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
